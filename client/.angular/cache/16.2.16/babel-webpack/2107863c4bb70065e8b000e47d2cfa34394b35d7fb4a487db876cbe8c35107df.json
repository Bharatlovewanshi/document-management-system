{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../core/services/document.service\";\nfunction DocumentEditComponent_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\nfunction DocumentEditComponent_app_loader_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loader\", 10);\n  }\n}\nexport class DocumentEditComponent {\n  constructor(route, router, documentService) {\n    this.route = route;\n    this.router = router;\n    this.documentService = documentService;\n    this.file = null;\n    this.changeNote = '';\n    this.isUploading = false;\n    this.errorMessage = '';\n  }\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get('id');\n    if (!id) {\n      this.router.navigate(['/dashboard']);\n      return;\n    }\n    this.documentId = id;\n  }\n  onFileChange(event) {\n    this.file = event.target.files[0];\n  }\n  submit() {\n    if (!this.file) {\n      this.errorMessage = 'Please select a file to upload.';\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', this.file);\n    formData.append('changeNote', this.changeNote);\n    this.isUploading = true;\n    this.documentService.editDocument(this.documentId, formData).subscribe({\n      next: () => {\n        this.isUploading = false;\n        this.goBack();\n      },\n      error: () => {\n        this.isUploading = false;\n        this.errorMessage = 'Failed to upload new version.';\n      }\n    });\n  }\n  /** ✅ SAFE method for template */\n  goBack() {\n    this.router.navigate(['/dashboard/view', this.documentId]);\n  }\n  static {\n    this.ɵfac = function DocumentEditComponent_Factory(t) {\n      return new (t || DocumentEditComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.DocumentService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DocumentEditComponent,\n      selectors: [[\"app-document-edit\"]],\n      decls: 12,\n      vars: 4,\n      consts: [[1, \"p-6\", \"max-w-xl\", \"mx-auto\"], [1, \"text-2xl\", \"font-bold\", \"mb-6\"], [\"class\", \"text-red-600 mb-3\", 4, \"ngIf\"], [\"placeholder\", \"Describe what changed (optional)\", 1, \"border\", \"rounded\", \"px-3\", \"py-2\", \"w-full\", \"mb-4\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", 1, \"mb-4\", 3, \"change\"], [\"text\", \"Uploading new version...\", 4, \"ngIf\"], [1, \"flex\", \"gap-3\"], [1, \"bg-blue-600\", \"text-white\", \"px-4\", \"py-2\", \"rounded\", \"hover:bg-blue-700\", \"disabled:opacity-50\", 3, \"disabled\", \"click\"], [1, \"bg-gray-300\", \"px-4\", \"py-2\", \"rounded\", 3, \"click\"], [1, \"text-red-600\", \"mb-3\"], [\"text\", \"Uploading new version...\"]],\n      template: function DocumentEditComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"Upload New Version\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, DocumentEditComponent_p_3_Template, 2, 1, \"p\", 2);\n          i0.ɵɵelementStart(4, \"textarea\", 3);\n          i0.ɵɵlistener(\"ngModelChange\", function DocumentEditComponent_Template_textarea_ngModelChange_4_listener($event) {\n            return ctx.changeNote = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"input\", 4);\n          i0.ɵɵlistener(\"change\", function DocumentEditComponent_Template_input_change_5_listener($event) {\n            return ctx.onFileChange($event);\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(6, DocumentEditComponent_app_loader_6_Template, 1, 0, \"app-loader\", 5);\n          i0.ɵɵelementStart(7, \"div\", 6)(8, \"button\", 7);\n          i0.ɵɵlistener(\"click\", function DocumentEditComponent_Template_button_click_8_listener() {\n            return ctx.submit();\n          });\n          i0.ɵɵtext(9, \" Upload Version \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"button\", 8);\n          i0.ɵɵlistener(\"click\", function DocumentEditComponent_Template_button_click_10_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵtext(11, \" Cancel \");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngModel\", ctx.changeNote);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.isUploading);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", ctx.isUploading);\n        }\n      },\n      styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkb2N1bWVudC1lZGl0LmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGFzaGJvYXJkL2RvY3VtZW50LWVkaXQvZG9jdW1lbnQtZWRpdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSw0S0FBNEsiLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","errorMessage","ɵɵelement","DocumentEditComponent","constructor","route","router","documentService","file","changeNote","isUploading","ngOnInit","id","snapshot","paramMap","get","navigate","documentId","onFileChange","event","target","files","submit","formData","FormData","append","editDocument","subscribe","next","goBack","error","ɵɵdirectiveInject","i1","ActivatedRoute","Router","i2","DocumentService","selectors","decls","vars","consts","template","DocumentEditComponent_Template","rf","ctx","ɵɵtemplate","DocumentEditComponent_p_3_Template","ɵɵlistener","DocumentEditComponent_Template_textarea_ngModelChange_4_listener","$event","DocumentEditComponent_Template_input_change_5_listener","DocumentEditComponent_app_loader_6_Template","DocumentEditComponent_Template_button_click_8_listener","DocumentEditComponent_Template_button_click_10_listener","ɵɵproperty"],"sources":["C:\\Users\\Bharat Singh\\Desktop\\companies\\Smartwinnr\\Document Management System\\client\\src\\app\\dashboard\\document-edit\\document-edit.component.ts","C:\\Users\\Bharat Singh\\Desktop\\companies\\Smartwinnr\\Document Management System\\client\\src\\app\\dashboard\\document-edit\\document-edit.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { DocumentService } from '../../core/services/document.service';\r\n\r\n@Component({\r\n  selector: 'app-document-edit',\r\n  templateUrl: './document-edit.component.html',\r\n  styleUrls: ['./document-edit.component.css']\r\n})\r\nexport class DocumentEditComponent implements OnInit {\r\n\r\n  documentId!: string;\r\n  file: File | null = null;\r\n  changeNote = '';\r\n  isUploading = false;\r\n  errorMessage = '';\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private documentService: DocumentService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    const id = this.route.snapshot.paramMap.get('id');\r\n    if (!id) {\r\n      this.router.navigate(['/dashboard']);\r\n      return;\r\n    }\r\n    this.documentId = id;\r\n  }\r\n\r\n  onFileChange(event: any): void {\r\n    this.file = event.target.files[0];\r\n  }\r\n\r\n  submit(): void {\r\n    if (!this.file) {\r\n      this.errorMessage = 'Please select a file to upload.';\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', this.file);\r\n    formData.append('changeNote', this.changeNote);\r\n\r\n    this.isUploading = true;\r\n\r\n    this.documentService.editDocument(this.documentId, formData).subscribe({\r\n      next: () => {\r\n        this.isUploading = false;\r\n        this.goBack();\r\n      },\r\n      error: () => {\r\n        this.isUploading = false;\r\n        this.errorMessage = 'Failed to upload new version.';\r\n      }\r\n    });\r\n  }\r\n\r\n  /** ✅ SAFE method for template */\r\n  goBack(): void {\r\n    this.router.navigate(['/dashboard/view', this.documentId]);\r\n  }\r\n}\r\n","<div class=\"p-6 max-w-xl mx-auto\">\r\n\r\n  <h2 class=\"text-2xl font-bold mb-6\">Upload New Version</h2>\r\n\r\n  <p *ngIf=\"errorMessage\" class=\"text-red-600 mb-3\">\r\n    {{ errorMessage }}\r\n  </p>\r\n\r\n  <textarea\r\n    [(ngModel)]=\"changeNote\"\r\n    placeholder=\"Describe what changed (optional)\"\r\n    class=\"border rounded px-3 py-2 w-full mb-4\"\r\n  ></textarea>\r\n\r\n  <input\r\n    type=\"file\"\r\n    (change)=\"onFileChange($event)\"\r\n    class=\"mb-4\"\r\n  />\r\n\r\n  <app-loader *ngIf=\"isUploading\" text=\"Uploading new version...\"></app-loader>\r\n\r\n  <div class=\"flex gap-3\">\r\n    <button\r\n      (click)=\"submit()\"\r\n      [disabled]=\"isUploading\"\r\n      class=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\r\n    >\r\n      Upload Version\r\n    </button>\r\n\r\n    <!-- ✅ FIXED -->\r\n    <button\r\n      (click)=\"goBack()\"\r\n      class=\"bg-gray-300 px-4 py-2 rounded\"\r\n    >\r\n      Cancel\r\n    </button>\r\n  </div>\r\n\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}