{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../core/services/document.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../shared/components/loader/loader.component\";\nfunction DocumentListComponent_app_loader_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loader\");\n  }\n}\nfunction DocumentListComponent_div_5_div_1_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tag_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", tag_r7, \" \");\n  }\n}\nfunction DocumentListComponent_div_5_div_1_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵtext(1, \" Edit \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DocumentListComponent_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\")(2, \"h3\", 9);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 11);\n    i0.ɵɵtemplate(7, DocumentListComponent_div_5_div_1_span_7_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 13)(9, \"a\", 14);\n    i0.ɵɵtext(10, \" View \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, DocumentListComponent_div_5_div_1_button_11_Template, 2, 0, \"button\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const doc_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(doc_r4.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" Version \", doc_r4.currentVersion, \" \\u00B7 \", doc_r4.fileType, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", doc_r4.tags);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", doc_r4.fileUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.canEdit(doc_r4));\n  }\n}\nfunction DocumentListComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, DocumentListComponent_div_5_div_1_Template, 12, 6, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.documents);\n  }\n}\nfunction DocumentListComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1, \" No documents found. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class DocumentListComponent {\n  constructor(documentService) {\n    this.documentService = documentService;\n    this.documents = [];\n    this.isLoading = false;\n    this.searchText = '';\n  }\n  ngOnInit() {\n    this.loadDocuments();\n  }\n  loadDocuments() {\n    this.isLoading = true;\n    this.documentService.getDocuments().subscribe({\n      next: res => {\n        //console.log('Documents API response:', res);\n        this.documents = res.documents || res.data || res.result || [];\n        this.isLoading = false;\n      },\n      error: err => {\n        console.error(err);\n        this.isLoading = false;\n      }\n    });\n  }\n  getUserId() {\n    const user = localStorage.getItem('user');\n    return user ? JSON.parse(user)._id : null;\n  }\n  canEdit(doc) {\n    const userId = this.getUserId();\n    return doc.uploadedBy?._id === userId || doc.permissions?.some(p => p.userId === userId && p.canEdit);\n  }\n  static {\n    this.ɵfac = function DocumentListComponent_Factory(t) {\n      return new (t || DocumentListComponent)(i0.ɵɵdirectiveInject(i1.DocumentService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DocumentListComponent,\n      selectors: [[\"app-document-list\"]],\n      decls: 7,\n      vars: 4,\n      consts: [[1, \"p-6\"], [1, \"text-2xl\", \"font-bold\", \"mb-4\"], [\"type\", \"text\", \"placeholder\", \"Search documents...\", 1, \"border\", \"rounded\", \"px-3\", \"py-2\", \"w-full\", \"mb-4\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [\"class\", \"space-y-3\", 4, \"ngIf\"], [\"class\", \"text-gray-500 mt-6\", 4, \"ngIf\"], [1, \"space-y-3\"], [\"class\", \"border rounded p-4 bg-white shadow-sm flex justify-between items-center\", 4, \"ngFor\", \"ngForOf\"], [1, \"border\", \"rounded\", \"p-4\", \"bg-white\", \"shadow-sm\", \"flex\", \"justify-between\", \"items-center\"], [1, \"font-semibold\"], [1, \"text-sm\", \"text-gray-500\"], [1, \"flex\", \"flex-wrap\", \"gap-2\", \"mt-2\"], [\"class\", \"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded\", 4, \"ngFor\", \"ngForOf\"], [1, \"flex\", \"gap-2\"], [\"target\", \"_blank\", 1, \"px-3\", \"py-1\", \"bg-gray-200\", \"rounded\", \"text-sm\", 3, \"href\"], [\"class\", \"px-3 py-1 bg-blue-600 text-white rounded text-sm\", 4, \"ngIf\"], [1, \"text-xs\", \"bg-blue-100\", \"text-blue-700\", \"px-2\", \"py-1\", \"rounded\"], [1, \"px-3\", \"py-1\", \"bg-blue-600\", \"text-white\", \"rounded\", \"text-sm\"], [1, \"text-gray-500\", \"mt-6\"]],\n      template: function DocumentListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \"Documents\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"input\", 2);\n          i0.ɵɵlistener(\"ngModelChange\", function DocumentListComponent_Template_input_ngModelChange_3_listener($event) {\n            return ctx.searchText = $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, DocumentListComponent_app_loader_4_Template, 1, 0, \"app-loader\", 3);\n          i0.ɵɵtemplate(5, DocumentListComponent_div_5_Template, 2, 1, \"div\", 4);\n          i0.ɵɵtemplate(6, DocumentListComponent_div_6_Template, 2, 0, \"div\", 5);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngModel\", ctx.searchText);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.documents.length > 0);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.documents.length === 0);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.LoaderComponent],\n      styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkb2N1bWVudC1saXN0LmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGFzaGJvYXJkL2RvY3VtZW50LWxpc3QvZG9jdW1lbnQtbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSw0S0FBNEsiLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelement","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","tag_r7","ɵɵtemplate","DocumentListComponent_div_5_div_1_span_7_Template","DocumentListComponent_div_5_div_1_button_11_Template","ɵɵtextInterpolate","doc_r4","title","ɵɵtextInterpolate2","currentVersion","fileType","ɵɵproperty","tags","fileUrl","ɵɵsanitizeUrl","ctx_r3","canEdit","DocumentListComponent_div_5_div_1_Template","ctx_r1","documents","DocumentListComponent","constructor","documentService","isLoading","searchText","ngOnInit","loadDocuments","getDocuments","subscribe","next","res","data","result","error","err","console","getUserId","user","localStorage","getItem","JSON","parse","_id","doc","userId","uploadedBy","permissions","some","p","ɵɵdirectiveInject","i1","DocumentService","selectors","decls","vars","consts","template","DocumentListComponent_Template","rf","ctx","ɵɵlistener","DocumentListComponent_Template_input_ngModelChange_3_listener","$event","DocumentListComponent_app_loader_4_Template","DocumentListComponent_div_5_Template","DocumentListComponent_div_6_Template","length"],"sources":["C:\\Users\\Bharat Singh\\Desktop\\companies\\Smartwinnr\\Document Management System\\client\\src\\app\\dashboard\\document-list\\document-list.component.ts","C:\\Users\\Bharat Singh\\Desktop\\companies\\Smartwinnr\\Document Management System\\client\\src\\app\\dashboard\\document-list\\document-list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { DocumentService } from '../../core/services/document.service';\r\n\r\n@Component({\r\n  selector: 'app-document-list',\r\n  templateUrl: './document-list.component.html',\r\n  styleUrls: ['./document-list.component.css']\r\n})\r\nexport class DocumentListComponent implements OnInit {\r\n\r\n  documents: any[] = [];\r\n  isLoading = false;\r\n  searchText = '';\r\n\r\n  constructor(private documentService: DocumentService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadDocuments();\r\n  }\r\n\r\n  loadDocuments(): void {\r\n  this.isLoading = true;\r\n\r\n  this.documentService.getDocuments().subscribe({\r\n    next: (res: any) => {\r\n      //console.log('Documents API response:', res);\r\n\r\n      this.documents =\r\n        res.documents ||\r\n        res.data ||\r\n        res.result ||\r\n        [];\r\n\r\n      this.isLoading = false;\r\n    },\r\n    error: (err) => {\r\n      console.error(err);\r\n      this.isLoading = false;\r\n    }\r\n  });\r\n}\r\n\r\n\r\n  getUserId(): string | null {\r\n    const user = localStorage.getItem('user');\r\n    return user ? JSON.parse(user)._id : null;\r\n  }\r\n\r\n  canEdit(doc: any): boolean {\r\n    const userId = this.getUserId();\r\n    return (\r\n      doc.uploadedBy?._id === userId ||\r\n      doc.permissions?.some(\r\n        (p: any) => p.userId === userId && p.canEdit\r\n      )\r\n    );\r\n  }\r\n}\r\n","<div class=\"p-6\">\r\n\r\n  <h2 class=\"text-2xl font-bold mb-4\">Documents</h2>\r\n\r\n  <!-- Search -->\r\n  <input\r\n    type=\"text\"\r\n    [(ngModel)]=\"searchText\"\r\n    placeholder=\"Search documents...\"\r\n    class=\"border rounded px-3 py-2 w-full mb-4\"\r\n  />\r\n\r\n  <!-- Loader -->\r\n  <app-loader *ngIf=\"isLoading\"></app-loader>\r\n\r\n  <!-- Document List -->\r\n  <div *ngIf=\"!isLoading && documents.length > 0\" class=\"space-y-3\">\r\n\r\n    <div\r\n      *ngFor=\"let doc of documents\"\r\n      class=\"border rounded p-4 bg-white shadow-sm flex justify-between items-center\"\r\n    >\r\n      <div>\r\n        <h3\r\n          class=\"font-semibold\"\r\n        >{{ doc.title }}</h3>\r\n\r\n        <p class=\"text-sm text-gray-500\">\r\n          Version {{ doc.currentVersion }} · {{ doc.fileType }}\r\n        </p>\r\n\r\n        <div class=\"flex flex-wrap gap-2 mt-2\">\r\n          <span\r\n            *ngFor=\"let tag of doc.tags\"\r\n            class=\"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded\"\r\n          >\r\n            {{ tag }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Actions -->\r\n      <div class=\"flex gap-2\">\r\n        <a\r\n          [href]=\"doc.fileUrl\"\r\n          target=\"_blank\"\r\n          class=\"px-3 py-1 bg-gray-200 rounded text-sm\"\r\n        >\r\n          View\r\n        </a>\r\n\r\n        <button\r\n          *ngIf=\"canEdit(doc)\"\r\n          class=\"px-3 py-1 bg-blue-600 text-white rounded text-sm\"\r\n        >\r\n          Edit\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n  <!-- Empty State -->\r\n  <div *ngIf=\"!isLoading && documents.length === 0\" class=\"text-gray-500 mt-6\">\r\n    No documents found.\r\n  </div>\r\n\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}